# AmityVox Deployment Configuration (Prebuilt Images)
# Copy to .env and edit before running: docker compose up -d
#
# This file is for deploying with prebuilt images (no build step).
# For building from source, use the .env.example in the repository root.

# ============================================================
# Instance
# ============================================================
# Public domain name (used for TLS, WebAuthn, federation, and the Caddyfile).
# Set to your real domain for production, or "localhost" for local testing.
AMITYVOX_INSTANCE_DOMAIN=localhost
# Display name shown in the UI and federation metadata.
AMITYVOX_INSTANCE_NAME=AmityVox
# Short description shown on the login page.
AMITYVOX_INSTANCE_DESCRIPTION=A self-hosted communication platform
# Federation mode: "disabled", "closed", "open", or "public".
AMITYVOX_INSTANCE_FEDERATION_MODE=disabled

# ============================================================
# Image Version
# ============================================================
# Pin a specific AmityVox image tag (e.g. v1.0.0). Defaults to "latest".
# AMITYVOX_TAG=latest

# ============================================================
# PostgreSQL
# ============================================================
POSTGRES_USER=amityvox
POSTGRES_DB=amityvox
# IMPORTANT: Change this to a strong random password for production.
# Generate one with: openssl rand -base64 24
POSTGRES_PASSWORD=amityvox

# ============================================================
# S3 Storage (Garage)
# ============================================================
# These are populated after first boot when you set up Garage.
# See README.md "Post-Install Setup" section.
AMITYVOX_STORAGE_ACCESS_KEY=
AMITYVOX_STORAGE_SECRET_KEY=
AMITYVOX_STORAGE_BUCKET=amityvox
# Garage RPC secret — generate with: openssl rand -hex 32
# IMPORTANT: Change this for production.
GARAGE_RPC_SECRET=please-change-me-to-a-random-64-char-hex-string

# ============================================================
# LiveKit (voice/video)
# ============================================================
# IMPORTANT: Change these to strong random values for production.
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=secret
# Public WebSocket URL clients use to connect to LiveKit.
# Use wss://yourdomain for production, ws://localhost:7880 for local testing.
AMITYVOX_LIVEKIT_PUBLIC_URL=ws://localhost:7880

# ============================================================
# Meilisearch (full-text search)
# ============================================================
# Master key for Meilisearch API authentication (min 16 bytes).
# Generate with: openssl rand -hex 16
MEILI_MASTER_KEY=

# ============================================================
# Push Notifications (optional)
# ============================================================
# Generate VAPID keys with: npx web-push generate-vapid-keys
# Leave empty to disable push notifications.
AMITYVOX_PUSH_VAPID_PUBLIC_KEY=
AMITYVOX_PUSH_VAPID_PRIVATE_KEY=
AMITYVOX_PUSH_VAPID_CONTACT_EMAIL=

# ============================================================
# Auth
# ============================================================
# Set to false to disable new user registration.
AMITYVOX_AUTH_REGISTRATION_ENABLED=true
# Set to true to require an invite code to register.
AMITYVOX_AUTH_INVITE_ONLY=false

# ============================================================
# Giphy (GIF search — optional)
# ============================================================
# Get a free API key at https://developers.giphy.com/dashboard/
AMITYVOX_GIPHY_ENABLED=false
AMITYVOX_GIPHY_API_KEY=

# ============================================================
# Translation (LibreTranslate)
# ============================================================
# Comma-separated language codes to load (fewer = faster startup, less RAM).
LT_LOAD_ONLY=en,es,fr,de,it,pt,ru,ja,ko,zh,ar,hi,nl,pl,tr,uk
# Pin the LibreTranslate image version.
LIBRETRANSLATE_TAG=v1.8.4

# ============================================================
# Media
# ============================================================
# Maximum file upload size (e.g. 50MB, 100MB, 500MB).
AMITYVOX_MEDIA_MAX_UPLOAD_SIZE=50MB

# ============================================================
# Logging
# ============================================================
# Log level: debug, info, warn, error.
AMITYVOX_LOGGING_LEVEL=info
# Log format: json or text.
AMITYVOX_LOGGING_FORMAT=json
