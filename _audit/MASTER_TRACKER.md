# AmityVox Pre-Release Audit -- Master Issue Tracker

**Generated:** 2026-02-18
**Codebase:** commit 804f1d3
**Total findings:** 82 (10 Critical, 22 High, 30 Medium, 20 Low)

---

## CRITICAL (10) -- Must fix before release

| ID | Severity | Phase | Category | Summary | File(s) | Line(s) | Effort | Status |
|----|----------|-------|----------|---------|---------|---------|--------|--------|
| CRIT-01 | Critical | 2C (Events) | Events | `PublishJSON()` creates events with empty routing envelope fields (`GuildID`, `ChannelID`, `UserID` all ""); ~85% of real-time events silently dropped by `shouldDispatchTo()` default `return false`. Root cause of 33 broken dispatch paths. | `internal/gateway/gateway.go`, `internal/events/events.go` | 912-923 | 8-16h | OPEN |
| CRIT-02 | Critical | 2C (Events) | Events | `GUILD_CREATE`, `GUILD_UPDATE`, `GUILD_DELETE` all broken: Guild struct uses `json:"id"` but `shouldDispatchTo()` prefix fallback extracts `guild_id` -- extraction always returns empty string. Same issue affects Channel struct events. | `internal/models/models.go`, `internal/gateway/gateway.go` | 158, 1008-1018 | 2-4h | OPEN |
| CRIT-03 | Critical | 4 (Security) | Security | Session tokens (which ARE the Bearer auth tokens) returned in plaintext via `GET /users/@me/sessions`. Attacker with one session can harvest all other sessions, escalating to full account takeover. | `internal/api/users/users.go` | 852-876 | 1-2h | OPEN |
| CRIT-04 | Critical | 4 (Security) | Security | `handleSearchMessages` never checks whether requesting user has access to channels/guilds of returned messages. Any authenticated user can search and read messages from private channels, DMs, and guilds they are not a member of. | `internal/api/search_handlers.go` | 20-133 | 4-8h | OPEN |
| CRIT-05 | Critical | 4 (Security) | Security | `DeliverOutgoingWebhook` makes HTTP POST to arbitrary user-configured URLs with no IP validation. Attacker with ManageWebhooks can target cloud metadata (169.254.169.254), localhost services, and Docker network addresses. Federation module has SSRF protection; webhooks do not. | `internal/api/webhooks/webhooks.go` | 620-651 | 2-3h | OPEN |
| CRIT-06 | Critical | 5 (Performance) | Performance | `shouldDispatchTo` executes 1-2 DB queries per-client for channel/DM events inside the dispatch loop (which iterates ALL connected clients under `clientsMu` RLock). With 100 clients and a DM typing event: 200 DB queries. Saturates 25-connection pool. | `internal/gateway/gateway.go` | 995-1063 | 2-4h | OPEN |
| CRIT-07 | Critical | 5 (Performance) | Performance | `hasGuildPermission`/`hasChannelPermission` execute 3-4 sequential DB queries per call (owner check, admin flag, default perms, role perms). Many handlers call them 2-3 times, generating 12-15 queries per request before main logic. | `internal/api/guilds/guilds.go`, `internal/api/channels/channels.go` | 2330-2376, 2665-2770 | 3-4h | OPEN |
| CRIT-08 | Critical | 5 (Performance) | Performance | `HandleCreateMessage` (the hottest path) executes ~25 sequential DB queries: 3x guild_id fetch, 2x owner_id fetch, 2x user flags fetch, 3x permission checks (each 3-4 queries), slowmode, encryption, DM spam check, plus the INSERT. | `internal/api/channels/channels.go` | 470-620 | 2-4h | OPEN |
| CRIT-09 | Critical | 6 (Quality) | Quality | Swallowed DB errors in permission checks: `_ = h.Pool.QueryRow(...).Scan(&ownerID)` in kick/ban handlers. If DB fails, `ownerID=""` passes `memberID == ownerID` check, allowing ban/kick of guild owner. Also `userFlags` and `defaultPerms` queries have no error checks. | `internal/api/guilds/guilds.go` | 812, 897, 2342, 2349 | 1-2h | OPEN |
| CRIT-10 | Critical | 6 (Quality) | Accessibility | No focus trapping in any modal component. All 8+ components with `aria-modal="true"` allow Tab to escape into background content. WCAG 2.1 Success Criterion 2.4.3 violation. Fixing Modal.svelte fixes 10+ downstream components. | `web/src/lib/components/common/Modal.svelte` | -- | 2-4h | OPEN |

---

## HIGH (22) -- Should fix before release

| ID | Severity | Phase | Category | Summary | File(s) | Line(s) | Effort | Status |
|----|----------|-------|----------|---------|---------|---------|--------|--------|
| HIGH-01 | High | 2C (Events) | Events | `shouldDispatchTo()` has no prefix handler for `amityvox.message.*`, `amityvox.poll.*`, `amityvox.automod.*`. Events on these subjects with empty envelope fields fall to default `return false`. All reaction, poll, automod, and embed-update events affected. | `internal/gateway/gateway.go` | 938-1063 | 4-6h | OPEN |
| HIGH-02 | High | 2C (Events) | Events | 24 event types successfully dispatched by gateway but have no `case` in frontend `gateway.ts` switch statement: GUILD_MEMBER_ADD/REMOVE, GUILD_ROLE_CREATE, GUILD_BAN_ADD/REMOVE, GUILD_EMOJI_UPDATE/DELETE, GUILD_EVENT_CREATE/UPDATE/DELETE, CHANNEL_PINS_UPDATE, CHANNEL_ACK, CHANNEL_WIDGET_*, SOUNDBOARD_*, VOICE_BROADCAST_*, SCREEN_SHARE_*, LOCATION_SHARE_* | `web/src/lib/stores/gateway.ts` | -- | 8-12h | OPEN |
| HIGH-03 | High | 2A (Backend) | Completeness | `HandleTriggerBackup` inserts backup history entry as "running", immediately marks as "completed" with `size_bytes = 0`. No actual backup (pg_dump, S3 copy) is performed. Admins see false "completed" backups. Real backups require `scripts/backup.sh`. | `internal/api/admin/selfhost.go` | 1494-1499 | 4-8h | OPEN |
| HIGH-04 | High | 2B (Frontend) | Completeness | StageChannelView: `speakers` and `audience` arrays initialized empty, never populated from WebSocket or LiveKit events. After joining a stage, UI shows "No one is speaking yet" permanently regardless of actual participants. No LiveKit Room connection for audio. | `web/src/lib/components/channels/StageChannelView.svelte` | 17-20, 124-168 | 4-8h | OPEN |
| HIGH-05 | High | 3 (Wiring) | Wiring | 5 Activities API methods use channel-scoped URLs (`/channels/{channelId}/activities/sessions/...`) but backend registers routes under `/activities/{activityID}/sessions/...`. All 5 calls return 404: `getActiveSession`, `createActivitySession`, `joinActivitySession`, `leaveActivitySession`, `endActivitySession`. | `web/src/lib/api/client.ts`, `internal/api/server.go` | -- | 1-2h | OPEN |
| HIGH-06 | High | 3 (Wiring) | Wiring | `ackWelcome` sends `POST /api/v1/encryption/welcome/${welcomeId}/ack` but backend expects `DELETE /api/v1/encryption/welcome/{welcomeID}` (no `/ack` suffix). Two mismatches: wrong HTTP method AND wrong URL path. Always returns 404/405. | `web/src/lib/api/client.ts` | -- | 15min | OPEN |
| HIGH-07 | High | 3B (Reverse) | Wiring | ~215 orphaned backend routes (53% of ~403 total) with no frontend consumer. Major gaps: social/growth (28), admin selfhost (49), voice advanced (21), experimental non-kanban (21), activities/games (18), integrations (13), widgets/plugins (12), encryption backup (5). | `internal/api/server.go` | -- | N/A | OPEN |
| HIGH-08 | High | 4 (Security) | Security | WebSocket gateway accepts connections from any origin: `OriginPatterns: []string{"*"}`. Enables cross-site WebSocket hijacking if attacker obtains session token via XSS. | `internal/gateway/gateway.go` | 201 | 1h | OPEN |
| HIGH-09 | High | 4 (Security) | Security | TOTP validation uses `==` string comparison instead of `subtle.ConstantTimeCompare`. Theoretical timing side-channel. Webhook token comparison at `webhooks.go:755` correctly uses constant-time compare, demonstrating the pattern is known. | `internal/auth/auth.go` | 526 | 15min | OPEN |
| HIGH-10 | High | 4 (Security) | Security | Registration token validation returns distinct error messages ("invalid_token" vs "token_exhausted" vs "token_expired") and has timing differences from DB lookup, allowing token state enumeration. | `internal/api/server.go` | 1155-1168 | 1h | OPEN |
| HIGH-11 | High | 4 (Security) | Security | `X-Forwarded-For` header trusted without validation in 3+ locations: rate limit IP extraction (trivially bypassable), session IP tracking (audit log poisoning), and security middleware. Any client can spoof. | `internal/api/ratelimit.go`, `internal/api/server.go` | 233-236, 1172, 1208 | 1-2h | OPEN |
| HIGH-12 | High | 4 (Security) | Security | Admin route group (`/admin/...`, 60+ routes) has no middleware-level authorization. Each handler must manually call `isAdmin()`. Forgetting in any new handler = privilege escalation. Current handlers appear correct but pattern is fragile. | `internal/api/server.go` | 963-1073 | 1-2h | OPEN |
| HIGH-13 | High | 5 (Performance) | Performance | N+1 query in `HandleUpdateGuildMember` role assignment: `DELETE FROM member_roles` then `INSERT` per role in a loop. Not wrapped in a transaction; partial failure leaves inconsistent state. 10 roles = 11 queries. | `internal/api/guilds/guilds.go` | 784-789 | 1h | OPEN |
| HIGH-14 | High | 5 (Performance) | Performance | N+1 query in crosspost fanout: per-follower INSERT + UPDATE + PublishJSON in a loop. 50 followers = 100 DB queries + 50 NATS publishes, all sequential. Multi-second response time. | `internal/api/channels/channels.go` | 2356-2386 | 2h | OPEN |
| HIGH-15 | High | 5 (Performance) | Performance | N+1 query in bulk message decrypt: per-message UPDATE in a loop (up to 100 messages = 100 sequential UPDATEs). Should use `pgx.Batch` or `unnest`. | `internal/api/channels/channels.go` | 2825-2836 | 1h | OPEN |
| HIGH-16 | High | 5 (Performance) | Performance | Unbounded SELECT on 5+ guild list endpoints: bans, invites, emoji, categories, webhooks all lack LIMIT/pagination. Guild with 10K bans returns all rows in single response. | `internal/api/guilds/guilds.go` | 860, 1342, 1498, 1652, 1804 | 2-4h | OPEN |
| HIGH-17 | High | 5 (Performance) | Performance | PRESENCE_UPDATE dispatch iterates ALL connected clients to find event user's guild memberships: O(N) per event per recipient. Called from O(clients) dispatch loop = O(N^2). With 500 clients: 250K operations per presence update. Should use `userClients` map (O(1) lookup). | `internal/gateway/gateway.go` | 938-973 | 1h | OPEN |
| HIGH-18 | High | 6 (Quality) | Quality | 16,132 lines of API handler code across 14 packages have zero test coverage: social (2011L), experimental (1769L), voice_handlers (1616L), bots (1453L), activities (1424L), widgets (1148L), moderation (1996L), guildevents (756L), integrations (739L), onboarding (733L), stickers (670L), polls (522L), search (427L), themes (403L), bookmarks (237L), giphy (228L). | Multiple files in `internal/api/` | -- | 40-80h | OPEN |
| HIGH-19 | High | 6 (Quality) | Quality | Duplicated `writeJSON`/`writeError` functions in 19 sub-packages (38 duplicate definitions). Exported versions in `server.go` use struct types; local copies use `map[string]interface{}`. Maintenance risk if envelope format changes. | All sub-packages under `internal/api/` | -- | 2-4h | OPEN |
| HIGH-20 | High | 6 (Quality) | Quality | Direct `json.NewEncoder(w).Encode(...)` bypassing standard `{"data": ...}` envelope in ban list export and user settings endpoints. Inconsistent response format for API consumers. | `internal/api/moderation/ban_lists.go`, `internal/api/users/users.go` | 351, 1099, 1126 | 1h | OPEN |
| HIGH-21 | High | 6 (Quality) | Quality | Swallowed errors in voice handlers: `_ = s.Voice.RemoveParticipant(...)` on disconnect/move, `_ = s.Voice.EnsureRoom(...)` on move, `_ = s.Voice.LogSoundboardPlay(...)`. Ghost participants, failed room creation, lost audit data. | `internal/api/voice_handlers.go` | 222, 445, 448, 1009, 1010 | 1h | OPEN |
| HIGH-22 | High | 6 (Quality) | Accessibility | 7 interactive components lack required ARIA attributes: EmojiPicker (no role/aria-label), GiphyPicker (same), StickerPicker (same), StatusPicker (same), MessageInput (no aria-label), IncomingCallModal (no role/aria-modal), ModerationModals (no ARIA). | Multiple component files | -- | 2-4h | OPEN |

---

## MEDIUM (30) -- Fix soon after release

| ID | Severity | Phase | Category | Summary | File(s) | Line(s) | Effort | Status |
|----|----------|-------|----------|---------|---------|---------|--------|--------|
| MED-01 | Medium | 2A (Backend) | Completeness | `HandleRunCodeSnippet` returns hardcoded placeholder string instead of actual execution or `501 Not Implemented`. Users get misleading "success" response for code that was never run. | `internal/api/experimental/experimental.go` | 1235-1236 | 1h | OPEN |
| MED-02 | Medium | 2A (Backend) | Completeness | `SubjectMessageReactionClr` ("amityvox.message.reaction_clear") defined but never published. No "clear all reactions" API endpoint exists. Feature designed but not built. | `internal/events/events.go` | 27 | 2-4h | OPEN |
| MED-03 | Medium | 2A (Backend) | Completeness | `SubjectRaidLockdown` ("amityvox.guild.raid_lockdown") defined but never published. Raid config exists and is manageable, but lockdown detection does not broadcast real-time event to clients. | `internal/events/events.go` | 80 | 2-4h | OPEN |
| MED-04 | Medium | 2A (Backend) | Completeness | `cross_channel_quotes` table created in migration 032 with indexes, but no Go code reads from or writes to it. Dead schema for unbuilt feature. | `migrations/032_message_features.up.sql` | 2 | 1h | OPEN |
| MED-05 | Medium | 2B (Frontend) | Completeness | StageChannelView placeholder: `speakers` and `audience` arrays initialized empty with code comment "In production these would be populated via WebSocket presence events." Core stage channel value proposition (seeing who speaks) non-functional. | `web/src/lib/components/channels/StageChannelView.svelte` | 17-20 | 4-8h | OPEN |
| MED-06 | Medium | 2B (Frontend) | Quality | Whiteboard `saveState()` catches all errors silently (`catch { // Silent save. }`). If backend save consistently fails, user draws without feedback that work is not persisting. Violates project error handling rules. | `web/src/lib/components/channels/Whiteboard.svelte` | 320-328 | 30min | OPEN |
| MED-07 | Medium | 2B (Frontend) | Completeness | Whiteboard has no WebSocket subscription for real-time collaboration. Two users on same whiteboard see only their own drawings until page reload. Collaborator list populated from initial GET only. | `web/src/lib/components/channels/Whiteboard.svelte` | -- | 4-8h | OPEN |
| MED-08 | Medium | 2B (Frontend) | Completeness | Experimental components (Whiteboard, KanbanBoard, LocationShare, ActivityFrame) all save/load via REST but have no WebSocket event handlers for real-time collaborative updates. Single-user functional, multi-user limited. | Multiple experimental components | -- | 8-16h | OPEN |
| MED-09 | Medium | 2C (Events) | Security | CHANNEL_ACK events dispatched to ALL guild members who can see the channel, not just the user who performed the ack. Leaks read receipt information (which user read which channel, when) to every guild member. | `internal/api/channels/channels.go`, `internal/gateway/gateway.go` | 1273 | 1h | OPEN |
| MED-10 | Medium | 3B (Reverse) | Wiring | Go `Embed` struct and TS `Embed` type have significantly different field structures. Go: `id`, `message_id`, `embed_type`, `site_name`, `icon_url`, `special_type/id`. TS: `thumbnail_url/width/height`, `author_name/url`, `provider_name/url`. Data likely lost or mismatched. | `internal/models/models.go`, `web/src/lib/types/index.ts` | -- | 2-4h | OPEN |
| MED-11 | Medium | 3B (Reverse) | Wiring | TS `Guild` type missing 6 fields that backend sends: `system_channel_join`, `system_channel_leave`, `system_channel_kick`, `system_channel_ban`, `afk_channel_id`, `afk_timeout`. Silently ignored by frontend. | `web/src/lib/types/index.ts` | -- | 1h | OPEN |
| MED-12 | Medium | 3B (Reverse) | Wiring | TS `Channel` type missing 4 fields: `default_permissions`, `read_only`, `read_only_role_ids`, `default_auto_archive_duration`. Backend sends them but frontend ignores. | `web/src/lib/types/index.ts` | -- | 1h | OPEN |
| MED-13 | Medium | 3B (Reverse) | Wiring | 5 Go model types have no TypeScript equivalent: `WebAuthnCredential`, `ChannelPermissionOverride`, `ChannelTemplate`, `BotGuildPermission`, `MessageComponent`. All correspond to orphaned backend features with no frontend. | `internal/models/models.go`, `web/src/lib/types/index.ts` | -- | 2h | OPEN |
| MED-14 | Medium | 4 (Security) | Security | CORS wildcard mode reflects exact request `Origin` header in `Access-Control-Allow-Origin` instead of literal `*`. When CORS origins configured as `["*"]`, any website can make cross-origin requests. | `internal/api/server.go` | 1440-1477 | 30min | OPEN |
| MED-15 | Medium | 4 (Security) | Security | SVG files not explicitly blocked at upload time. SVGs can contain JavaScript. Download handler sets `nosniff` and CSP (partial mitigation), but if served from cookie-sharing domain, XSS risk remains. | `internal/media/media.go` | -- | 1-2h | OPEN |
| MED-16 | Medium | 4 (Security) | Security | READY payload includes `SelfUser` (which has email). Currently safe due to `json:"-"` on `User.Email`, but design fragility: future code accidentally serializing `SelfUser` for another user would leak email. | `internal/gateway/gateway.go` | ~611 | 15min | OPEN |
| MED-17 | Medium | 4 (Security) | Security | Expired sessions remain in `user_sessions` table indefinitely. `ValidateSession` checks expiry, but no cleanup worker exists. Accumulates stale data; increases blast radius in case of DB breach. | `internal/auth/auth.go` | -- | 1-2h | OPEN |
| MED-18 | Medium | 4 (Security) | Security | In-memory DM spam tracker (`dmSpamTracker`) not shared across instances. In multi-instance deployment, attacker distributes spam across instances to bypass per-instance limits. Also lost on restart. | `internal/api/channels/channels.go` | 42-127 | 2-4h | OPEN |
| MED-19 | Medium | 4 (Security) | Security | Session validation via DB `SELECT ... WHERE id = $1` is not constant-time (index lookup timing varies). Theoretical only -- 256-bit token entropy makes timing attacks infeasible. No action needed. | `internal/auth/auth.go` | -- | N/A | OPEN |
| MED-20 | Medium | 5 (Performance) | Performance | Frontend `messagesByChannel` store (`Map<string, Message[]>`) never evicts messages when switching channels. Long sessions visiting many channels accumulate unbounded memory. `clearChannelMessages` exists but never called automatically. | `web/src/lib/stores/messages.ts` | -- | 2-4h | OPEN |
| MED-21 | Medium | 5 (Performance) | Performance | MessageList and MemberList render all items directly in DOM without virtual scrolling. 500 messages = 500 MessageItem components with avatars, markdown, reactions, attachments. Causes jank on low-end devices. | `web/src/lib/components/chat/MessageList.svelte`, `web/src/lib/components/layout/MemberList.svelte` | 375 | 4-8h | OPEN |
| MED-22 | Medium | 5 (Performance) | Quality | `dmSpamTracker` cleanup goroutine started in `init()` with no context cancellation, no lifecycle management, no ticker stop. Leaks during shutdown and tests. Violates "stateless core" principle. | `internal/api/channels/channels.go` | 119-127 | 1h | OPEN |
| MED-23 | Medium | 5 (Performance) | Performance | Redundant queries in `HandleCreateMessage`: `channels.guild_id` fetched 3x (lines 491, 587, inside hasChannelPermission), `guilds.owner_id` 2x, `users.flags` 2x, `channels.encrypted` and `channels.slowmode_seconds` separate from initial channel fetch. 5-8 wasted queries. | `internal/api/channels/channels.go` | 470-600 | 2h | OPEN |
| MED-24 | Medium | 5 (Performance) | Performance | Workers run at fixed interval regardless of failure. During DB outage, all 8+ periodic workers hammer DB every tick, generating sustained error load and log spam. No exponential backoff on consecutive failures. | `internal/workers/workers.go` | 112-141 | 1-2h | OPEN |
| MED-25 | Medium | 5 (Performance) | Performance | All DB queries in `shouldDispatchTo` use `context.Background()` -- cannot be cancelled on connection close or server shutdown. Pending queries block graceful termination and consume pool connections. | `internal/gateway/gateway.go` | 1001, 1023, 1033, 1048, 1058 | 1h | OPEN |
| MED-26 | Medium | 5 (Performance) | Performance | Retention worker deletes from Meilisearch search index one message at a time. Batch of 1000 messages = 1000 individual HTTP requests. Should use Meilisearch batch delete API. | `internal/workers/retention_worker.go` | 189-193 | 1h | OPEN |
| MED-27 | Medium | 6 (Quality) | Quality | 40+ hardcoded hex color values in component `<style>` blocks bypassing theme system. Worst offenders: SoundboardSettings (6), VoiceBroadcast (6), Whiteboard (6+). UI chrome colors should use CSS variables. | Multiple component files | -- | 2-4h | OPEN |
| MED-28 | Medium | 6 (Quality) | Quality | 4 non-API internal packages with zero test coverage: notifications (646L), plugins (741L), middleware (934L), scanning (379L). Middleware is easily testable with httptest; scanning can mock ClamAV. | Multiple files in `internal/` | -- | 8-16h | OPEN |
| MED-29 | Medium | 6 (Quality) | Quality | Gateway presence publish error (`_ = s.eventBus.Publish(...)`) and `last_online` DB update error (`_, _ = s.pool.Exec(context.Background(), ...)`) both silently ignored. Users may appear online/offline incorrectly with no log trail. | `internal/gateway/gateway.go` | 1234, 281 | 30min | OPEN |
| MED-30 | Medium | 6 (Quality) | Quality | Ignored DB errors in block/relationship checks: `_ = h.Pool.QueryRow(...).Scan(&blocked)` in friend request handler and `_ = h.Pool.QueryRow(...).Scan(&alreadyBlocked)` in block handler. DB failure defaults to `false`, allowing friend requests to blocked users. | `internal/api/users/users.go`, `internal/api/moderation/moderation.go` | 387, 579, 581 | 1h | OPEN |

---

## LOW (20) -- Nice to have

| ID | Severity | Phase | Category | Summary | File(s) | Line(s) | Effort | Status |
|----|----------|-------|----------|---------|---------|---------|--------|--------|
| LOW-01 | Low | 2A (Backend) | Completeness | Custom domain DNS verification is manual-only. Admin clicks "verify" without automated `net.LookupTXT` check. Acceptable for self-hosted; enhancement for hosted deployments. | `internal/api/admin/selfhost.go` | 1101-1102 | 2-4h | OPEN |
| LOW-02 | Low | 2A (Backend) | Completeness | `stubHandler("upload_file")` used when `s.Media` is nil (S3 not configured). Returns 501 Not Implemented. Intentional graceful degradation; well-tested. No action needed. | `internal/api/server.go` | 895 | N/A | OPEN |
| LOW-03 | Low | 2A (Backend) | Completeness | `SubjectVoiceServerUpdate` ("amityvox.voice.server_update") defined but never published. Forward-looking constant for multi-region voice deployment. Not needed for v1.0. | `internal/events/events.go` | 60 | N/A | OPEN |
| LOW-04 | Low | 2A (Backend) | Completeness | Empty `messages` package with only package declaration and comment explaining messages live in `channels` package. Documented architectural decision. | `internal/api/messages/messages.go` | -- | N/A | OPEN |
| LOW-05 | Low | 2B (Frontend) | Completeness | ActivityFrame shows static "Built-in activity running" placeholder for `builtin://` URLs. External URL activities work via iframe. Built-in activities are an extension point. | `web/src/lib/components/channels/ActivityFrame.svelte` | 266-275 | 2-4h | OPEN |
| LOW-06 | Low | 2B (Frontend) | Quality | LocationShare live update interval catches and suppresses all errors silently. If API unreachable, live location stops updating without user notification. Next interval retries. | `web/src/lib/components/chat/LocationShare.svelte` | 141-143 | 15min | OPEN |
| LOW-07 | Low | 2B (Frontend) | Quality | LocationShare `stopLiveSharing()` ignores DELETE cleanup errors. Zombie live location could persist server-side. Edge case; cleanup is best-effort. | `web/src/lib/components/chat/LocationShare.svelte` | 155-157 | 15min | OPEN |
| LOW-08 | Low | 2B (Frontend) | Quality | VideoRecorder `formattedTime` uses `$derived(() => { ... })` which returns a function, not a value. Template calls it as `{formattedTime()}`. Works but is an anti-pattern in Svelte 5 conventions. | `web/src/lib/components/chat/VideoRecorder.svelte` | 30-34 | 15min | OPEN |
| LOW-09 | Low | 2B (Frontend) | Completeness | KanbanBoard has no WebSocket subscription for real-time updates. Board reloads only on user's own actions (`loadBoard()`). Multi-user concurrent editing without real-time sync is a limitation. | `web/src/lib/components/channels/KanbanBoard.svelte` | -- | 4-8h | OPEN |
| LOW-10 | Low | 2B (Frontend) | Quality | `console.log('[GW] New build detected, reloading page')` in ws.ts. Informational log in production. Consider removing or guarding behind debug flag. | `web/src/lib/api/ws.ts` | 113 | 5min | OPEN |
| LOW-11 | Low | 3 (Wiring) | Wiring | `deleteKeyPackage` frontend variable `keyPackageId` vs backend chi parameter `packageID`. No runtime impact (chi extracts from URL segment regardless of variable name). Cosmetic naming inconsistency. | `web/src/lib/api/client.ts`, `internal/api/server.go` | -- | 5min | OPEN |
| LOW-12 | Low | 4 (Security) | Security | Default Argon2id parameters from alexedwards/argon2id library (memory: 64MB, iterations: 1, parallelism: 2). Adequate but conservative. Consider making configurable via TOML config. | `internal/auth/auth.go` | 117 | 1h | OPEN |
| LOW-13 | Low | 4 (Security) | Security | Webhook execution token visible in URL path (`/webhooks/{id}/{token}`). May appear in server logs, browser history, referrer headers. Industry-standard pattern (Discord, Slack use same approach). | `internal/api/webhooks/webhooks.go` | -- | N/A | OPEN |
| LOW-14 | Low | 4 (Security) | Security | Federation signature parsing uses `fmt.Sscanf` for hex decoding instead of `encoding/hex.DecodeString`. Less strict error handling, but malformed input fails signature verification anyway. | `internal/federation/federation.go` | -- | 15min | OPEN |
| LOW-15 | Low | 4 (Security) | Security | No per-account brute force protection on login. Global rate limiter caps at 100/min unauthenticated. Argon2id adds ~300ms server-side. Practical brute force infeasible but per-account lockout would be defense-in-depth. | `internal/api/server.go` | ~1199 | 2-4h | OPEN |
| LOW-16 | Low | 4 (Security) | Security | In-memory DM spam tracker state lost on server restart. Brief window allows burst of DM spam immediately after restart. Covered by MED-18 (move to DragonflyDB). | `internal/api/channels/channels.go` | 42-127 | (see MED-18) | OPEN |
| LOW-17 | Low | 5 (Performance) | Performance | Role and channel reorder handlers execute per-item UPDATE queries inside a transaction loop. 20 roles = 20 UPDATEs. Low frequency admin operation. Could use batch UPDATE with VALUES clause. | `internal/api/guilds/guilds.go` | 1258-1266, 1309-1317 | 1h | OPEN |
| LOW-18 | Low | 5 (Performance) | Performance | Server guide step insert in a loop (max 20 steps, each a separate INSERT + RETURNING). Low frequency admin operation. Minimal impact. | `internal/api/guilds/guilds.go` | 2887-2902 | 30min | OPEN |
| LOW-19 | Low | 5 (Performance) | Performance | Frontend `handleBulkPin` makes sequential `await api.pinMessage()` calls per selected message. No parallelism via `Promise.all`. 10 messages = 10 sequential HTTP requests. | `web/src/lib/components/chat/MessageList.svelte` | 84-96 | 30min | OPEN |
| LOW-20 | Low | 5 (Performance) | Performance | Database connection pool `MinConns = 2`. On request spikes after idle period, new connections must be established (5-20ms cold start penalty). Consider `MinConns = max(5, MaxConns/4)`. | `internal/database/database.go` | 38 | 15min | OPEN |

---

*Last updated: 2026-02-18 -- Phase 7 (Final Report)*
*Total: 82 findings (10 Critical, 22 High, 30 Medium, 20 Low)*
*All items status: OPEN*
