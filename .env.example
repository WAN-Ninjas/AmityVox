# AmityVox Docker Compose Environment
# Copy to .env and edit before running: make docker-up

# ============================================================
# Instance
# ============================================================
# Public domain name for your instance (used for TLS, WebAuthn, federation)
AMITYVOX_INSTANCE_DOMAIN=localhost
# Display name shown in the UI and federation metadata
AMITYVOX_INSTANCE_NAME=AmityVox
# Short description of your instance (shown on the login page)
AMITYVOX_INSTANCE_DESCRIPTION=A self-hosted communication platform
# Federation mode: "open" (anyone can federate), "allowlist", or "disabled"
AMITYVOX_INSTANCE_FEDERATION_MODE=disabled

# ============================================================
# PostgreSQL
# ============================================================
POSTGRES_USER=amityvox
# IMPORTANT: Change this to a strong random password for production
POSTGRES_PASSWORD=amityvox
POSTGRES_DB=amityvox
# Max database connections in the pool (default: 25)
# AMITYVOX_DATABASE_MAX_CONNECTIONS=25

# ============================================================
# S3 Storage (Garage)
# ============================================================
# After first boot, run: docker exec amityvox-garage garage key list
# Then set these values from the output.
AMITYVOX_STORAGE_ACCESS_KEY=
AMITYVOX_STORAGE_SECRET_KEY=
AMITYVOX_STORAGE_BUCKET=amityvox

# ============================================================
# LiveKit (voice/video)
# ============================================================
# Shared key pair for LiveKit token signing
LIVEKIT_API_KEY=devkey
LIVEKIT_API_SECRET=secret
# Public WebSocket URL clients use to connect to LiveKit
AMITYVOX_LIVEKIT_PUBLIC_URL=wss://localhost

# ============================================================
# Meilisearch (full-text search)
# ============================================================
# Master key for Meilisearch API authentication (generate a random string)
MEILI_MASTER_KEY=

# ============================================================
# Push Notifications (optional)
# ============================================================
# Generate VAPID keys with: npx web-push generate-vapid-keys
AMITYVOX_PUSH_VAPID_PUBLIC_KEY=
AMITYVOX_PUSH_VAPID_PRIVATE_KEY=
# Contact email for push notification service
AMITYVOX_PUSH_VAPID_CONTACT_EMAIL=

# ============================================================
# Logging
# ============================================================
# Log level: debug, info, warn, error
AMITYVOX_LOGGING_LEVEL=info
# Log format: json or text
AMITYVOX_LOGGING_FORMAT=json

# ============================================================
# Giphy (GIF search)
# ============================================================
# Get a free API key at https://developers.giphy.com/dashboard/
AMITYVOX_GIPHY_ENABLED=false
AMITYVOX_GIPHY_API_KEY=

# ============================================================
# Translation (LibreTranslate)
# ============================================================
# Comma-separated language codes to load (fewer = faster startup, less RAM)
LT_LOAD_ONLY=en,es,fr,de,it,pt,ru,ja,ko,zh,ar,hi,nl,pl,tr,uk
# Pin the LibreTranslate image version
LIBRETRANSLATE_TAG=v1.8.4

# ============================================================
# Auth
# ============================================================
# Set to false to disable new user registration
AMITYVOX_AUTH_REGISTRATION_ENABLED=true
# Set to true to require an invite code to register
AMITYVOX_AUTH_INVITE_ONLY=false
# Set to true to require email verification on registration
AMITYVOX_AUTH_REQUIRE_EMAIL=false
# Session token lifetime (e.g. 720h = 30 days)
# AMITYVOX_AUTH_SESSION_DURATION=720h

# ============================================================
# Media
# ============================================================
# Maximum file upload size (e.g. 50MB, 100MB)
AMITYVOX_MEDIA_MAX_UPLOAD_SIZE=50MB
# Transcode uploaded videos to web-friendly format
# AMITYVOX_MEDIA_TRANSCODE_VIDEO=false
# Strip EXIF metadata from uploaded images (privacy)
# AMITYVOX_MEDIA_STRIP_EXIF=true

# ============================================================
# Metrics (optional â€” Prometheus endpoint)
# ============================================================
# AMITYVOX_METRICS_ENABLED=false
# AMITYVOX_METRICS_LISTEN=0.0.0.0:9090
